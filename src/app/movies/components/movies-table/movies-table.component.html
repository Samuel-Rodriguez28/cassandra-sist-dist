<p-toast />
<p-confirmDialog />
<p-table #dt2 [value]="movies" [loading]="loading" [globalFilterFields]="['name', 'actors', 'franchise', 'synopsis', 'release_date', 'directors']">
    <ng-template pTemplate="caption">
        <div class="flex gap-2">
            <p-button (onClick)="openNewMovieForm()" rounded="true" label="Agregar" icon="pi pi-plus" />
            <p-iconField iconPosition="left" class="ml-auto">
                <p-inputIcon>
                    <i class="pi pi-search"></i>
                </p-inputIcon>
                <input 
                    pInputText 
                    type="text" 
                    (input)="onInput($event)" 
                    placeholder="Buscar..." />
            </p-iconField>
        </div>
    </ng-template>
    <ng-template  pTemplate="header">
        <tr>
            <th pSortableColumn="name">
                Nombre <p-sortIcon field="name" />
            </th>
            <th pSortableColumn="franchise">
                Franquicia <p-sortIcon field="franchise" />
            </th>
            <th pSortableColumn="synopsis">
                Sinopsis <p-sortIcon field="synopsis" />
            </th>
            <th pSortableColumn="directors">
                Director(es) <p-sortIcon field="directors" />
            </th>
            <th pSortableColumn="actors">
                Actores <p-sortIcon field="actors" />
            </th>
            <th pSortableColumn="release_date">
                Fecha de Lanzamiento <p-sortIcon field="release_date" />
            </th>
            <th>
                Acciones
            </th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-movie>
        <tr>
            <td>{{movie.name}}</td>
            <td>{{movie.franchise}}</td>
            <td>{{movie.synopsis}}</td>
            <td>{{formatTextArray(movie.directors)}}</td>
            <td>{{formatTextArray(movie.actors)}}</td>
            <td>{{movie.release_date}}</td>
            <td>
                <div class="flex gap-2">
                    <!-- <p-button (onClick)="openUpdateMovieForm(movie.id)" severity="info" icon="pi pi-info-circle" rounded="true" /> -->
                    <p-button (onClick)="openMovieDeleteDialog($event, movie.id)" severity="danger" icon="pi pi-trash" rounded="true" />
                </div>
            </td>
        </tr>
    </ng-template>
</p-table>